{% extends 'base.html' %}
{% comment %} Page de confirmation d'achat - daisyUI {% endcomment %}

{% block content %}
<section class="py-12 lg:py-20 bg-base-200 min-h-screen">
    <div class="container mx-auto px-4">
        <div class="max-w-xl mx-auto">
            <div class="card bg-base-100 shadow-2xl overflow-hidden">
                <!-- Success Header -->
                <div class="bg-success text-success-content p-8 text-center">
                    <div class="w-20 h-20 mx-auto bg-white/20 rounded-full flex items-center justify-center mb-4">
                        <i class="ti ti-circle-check text-5xl"></i>
                    </div>
                    <h1 class="text-2xl font-heading font-bold">Merci pour votre achat!</h1>
                    <p class="opacity-90 mt-2">Votre paiement a été effectué avec succès.</p>
                </div>
                
                <div class="card-body p-8">
                    <!-- Order Details -->
                    <div class="bg-base-200 p-6 rounded-xl mb-6">
                        <h2 class="text-sm font-semibold uppercase tracking-wide opacity-60 mb-4">
                            Détails de votre commande
                        </h2>
                        <dl class="grid grid-cols-2 gap-3 text-sm">
                            <dt class="opacity-60">Livre</dt>
                            <dd class="font-semibold">{{ achat.livre_titre }}</dd>
                            
                            <dt class="opacity-60">Montant payé</dt>
                            <dd class="font-semibold text-primary-custom">{{ achat.montant|floatformat:0 }} FCFA</dd>
                            
                            <dt class="opacity-60">Référence</dt>
                            <dd class="font-mono text-xs">{{ achat.reference_transaction }}</dd>
                            
                            <dt class="opacity-60">Email</dt>
                            <dd>{{ achat.email_client }}</dd>
                        </dl>
                    </div>
                    
                    <!-- Download Section -->
                    <div class="bg-primary-custom/5 border-2 border-primary-custom/20 p-6 rounded-xl text-center mb-6">
                        <h2 class="text-lg font-heading font-bold text-primary-custom mb-2">
                            <i class="ti ti-download mr-2"></i>
                            Télécharger votre livre
                        </h2>
                        <p class="text-sm opacity-70 mb-4">
                            Cliquez sur le bouton ci-dessous pour télécharger votre livre au format PDF.
                        </p>
                        
                        <a href="{% url 'blog:telecharger_livre' token %}" class="btn btn-primary btn-lg gap-2">
                            <i class="ti ti-file-download"></i>
                            Télécharger le PDF
                        </a>
                        
                        <p class="flex items-center justify-center gap-2 text-xs opacity-60 mt-4">
                            <i class="ti ti-info-circle"></i>
                            Vous disposez de {{ achat.max_telechargements }} téléchargements. Le lien expire dans 7 jours.
                        </p>
                    </div>
                    
                    <!-- Email Notice -->
                    <div class="alert alert-info">
                        <i class="ti ti-mail"></i>
                        <span>
                            Un email de confirmation a été envoyé à <strong>{{ achat.email_client }}</strong> 
                            avec le lien de téléchargement.
                        </span>
                    </div>
                    
                    <!-- Actions -->
                    <div class="flex flex-col sm:flex-row gap-3 mt-6">
                        <a href="{% url 'blog:liste_livres' %}" class="btn btn-outline flex-1 gap-1">
                            <i class="ti ti-book"></i>
                            Découvrir d'autres livres
                        </a>
                        <a href="{% url 'blog:accueil' %}" class="btn btn-ghost flex-1 gap-1">
                            <i class="ti ti-home"></i>
                            Retour à l'accueil
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
